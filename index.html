<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>cms-5000</title>
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/bootstrap-theme.min.css">
  <link rel="stylesheet" href="css/style.css">
  <script src="js/libs/jquery-1.11.1.min.js"></script>
  <script src="js/libs/ember-template-compiler-1.12.0-beta.1.js"></script>
  <script src="js/libs/handlebars-v1.3.0.js"></script>
  <script src="js/libs/ember-1.10.0.min.js"></script>
  <script src="js/libs/ember-data-1.0.0-beta-11.js"></script>
  <script src="js/libs/showdown-0.3.1.min.js"></script>
  <script src="js/libs/moment.min.js"></script>
  <script src="js/libs/pouchdb-3.3.0.min.js"></script>
  <script src="js/libs/bootstrap.min.js"></script>
  <script src="js/app.js"></script>
  <script src="js/script.js"></script>
  <script src="js/models/post.js"></script>
  <script src="js/models/page.js"></script>
</head>

<body>
  <script type="text/x-handlebars">
    <div class="container-fluid">
      <nav class="navbar navbar-default">
        <div class="container-fluid">
          <div class="navbar-header">
            <a class="navbar-brand" href="#">cms-5000</a>
          </div>
          <ul class="nav navbar-nav">
            <li>{{#link-to 'about'}}About{{/link-to}}</li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li>
              <form class="searchbox">
                <input type="search" placeholder="Search..." name="search" class="searchbox-input" onkeyup="searchboxHover();" required>
                <input type="submit" class="searchbox-submit" value="">
                <img src="images/magnifier.svg" alt="" class="searchbox-icon">
              </form>
            </li>
            <li>
              <a href="" data-toggle="modal" data-target=".modal-add-post">Add a Post</a>
            </li>
            <li class="dropdown">
              <a href="" class="dropdown-toggle" data-toggle="dropdown">Login <b class="caret"></b></a>
              <ul class="dropdown-menu" style="padding: 15px;min-width: 250px;">
                <li>
                  <form class="form" role="form" method="post" action="login" accept-charset="UTF-8" id="login-nav">
                    <div class="form-group">
                      <label class="sr-only" for="login-email">Email Address</label>
                      <input type="email" class="form-control" id="login-email" placeholder="Email Address" required>
                    </div>
                    <div class="form-group">
                      <label class="sr-only" for="login-password">Password</label>
                      <input type="password" class="form-control" id="login-password" placeholder="Password" required>
                    </div>
                    <div class="form-group">
                      <button type="submit" class="btn btn-success btn-block">Login</button>
                    </div>
                  </form>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </nav>
      <div class="row">
        <div class="col-md-offset-2 col-md-8">
          {{outlet}}
        </div>
      </div>
    </div>
  </script>
  
  <script type="text/x-handlebars" id="posts/index">
    
    <div class="modal fade modal-add-post" tabindex="-1" role="dialog" aria-labelledby="add-post" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Add a Post</h4>
          </div>
          <div class="modal-body">
            <div role="tabpanel">
              <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#newEditor" aria-controls="newEditor" role="tab" data-toggle="tab">Editor</a></li>
                <li role="presentation"><a href="#newPreview" aria-controls="newPreview" role="tab" data-toggle="tab">Preview</a></li>
              </ul>
              <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="newEditor">
                  <p>{{input type="text" value=newTitle placeholder="Title" class="form-control" required="true"}}</p>
                  <p>{{textarea value=newExcerpt placeholder="Excerpt" cols="80" rows="4" class="form-control" required="true"}}</p>
                  <p>{{textarea value=newBody placeholder="Main Content" cols="80" rows="4" class="form-control"}}</p>
                  <p>{{input type="text" value=newTags placeholder="Tags" class="form-control"}}</p>
                </div>
                <div role="tabpanel" class="tab-pane" id="newPreview">
                  <h1>{{newTitle}}</h1>
                  <p class="excerpt">{{format-markdown newExcerpt}}</p>
                  <p class="body">{{format-markdown newBody}}</p>
                  <p class="tags">Tags: <span class="tags-content">{{newTags}}</span></p>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button {{action 'addPost'}} class="btn btn-primary">Save</button>
            <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-default">Cancel</button>
          </div>
        </div>
      </div>
    </div>
    
    <div class="row">
      {{#each post in model itemController="post"}}
        <article class="post">
        {{#if post.isEditing}}
            <div class="post-editing" role="tabpanel">
              <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#editor" aria-controls="editor" role="tab" data-toggle="tab">Editor</a></li>
                <li role="presentation"><a href="#preview" aria-controls="preview" role="tab" data-toggle="tab">Preview</a></li>
              </ul>
              <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="editor">
                  <label for="title">Title</label>
                  <p>{{input type="text" value=post.title class="form-control" id="title" required="true"}}</p>
                  <label for="excerpt">Excerpt</label>
                  <p>{{textarea value=post.excerpt cols="80" rows="4" class="form-control" id="excerpt" required="true"}}</p>
                  <label for="body">Content</label>
                  <p>{{textarea value=post.body cols="80" rows="4" class="form-control" id="body"}}</p>
                  <label for="Tags">Tags</label>
                  <p>{{input type="text" value=post.tags class="form-control" id="tags"}}</p>
                </div>
                <div role="tabpanel" class="tab-pane" id="preview">
                  <h1>{{post.title}}</h1>
                  <p class="excerpt">{{format-markdown post.excerpt}}</p>
                  <p class="body">{{format-markdown post.body}}</p>
                  <p class="metadata">{{format-date post.date}}</p>
                  <p class="tags">Tags: <span class="tags-content">{{post.tags}}</span></p>
                </div>
              </div>
              <div class="btn-group" role="group">
                <button {{action 'editPost'}} class="btn btn-primary">Save</button>
                <button {{action 'toggleEdit'}} class="btn btn-default">Cancel</button>
              </div>
              <button {{action 'removePost'}} class="btn btn-danger pull-right">
                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
              </button>
            </div>
        {{else}}
<!--          <h1>{{#link-to 'posts.view' post}}{{post.title}}{{/link-to}}</h1>-->
          <h1>{{post.title}}</h1>
          <p class="excerpt">{{format-markdown post.excerpt}}</p>
          <p class="metadata">{{format-date post.date}}</p>
          <p class="tags">Tags: <span class="tags-content">{{post.tags}}</span></p>
          <button type="button" {{action 'toggleEdit'}} class="btn btn-default" title="Edit this post."><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button>
        {{/if}}
        </article>
      {{else}}
        <p class="info">There aren't any posts yet.</p>
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target=".modal-add-post">Add a Post</button>
      {{/each}}
    </div>
  </script>
  
  <script type="text/x-handlebars" id="posts/view">
    <p>lol, test.</p>
  </script>
  
  <!--
  <script type="text/x-handlebars" id="post/_edit">
    <p>{{input type="text" value=title}}</p>
    <p>{{input type="text" value=excerpt}}</p>
    <p>{{textarea value=content}}</p>
    <p>{{input type="text" value=tags }}</p>
  </script>
  
  <script type="text/x-handlebars" id="page">
    <div class="page">
      <h1>{{title}}</h1>
      <div class="page-content">
        {{format-markdown content}} 
      </div>
    </div>
  </script>
-->

  <script type="text/x-handlebars" id="about">
    <article class='page'>
      <h1>About</h1>
      <p>One day this will be editable...</p>
    </article>
  </script>

</body>

</html>